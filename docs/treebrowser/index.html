<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover"
    />
    <title>Tree Browser</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <div class="wrap">
      <header>
        <div>
          <h1>Filelist Tree Browser (static)</h1>
          <div class="sub">
            Drop a file list (e.g. <span class="kbd">tar -tf</span> or
            <span class="kbd">tar -tvf</span>) and browse it locally.
          </div>
        </div>
        <div class="btns">
          <button id="btnReset" class="danger hidden">Reset</button>
          <button id="btnDemo" title="Load a small built-in demo list">
            Load demo
          </button>
        </div>
      </header>

      <div id="landing" class="card landing">
        <strong>Load a file list</strong>
        <p>Drop a text file containing paths (e.g. <span class="kbd">tar -tf</span> output).</p>

        <div id="drop" class="drop" tabindex="0">
          <strong>Drag & drop your filelist file here</strong>
          <div class="small">
            Or use the file picker. Nothing is uploaded; parsing happens in your
            browser.
          </div>
          <div class="btns">
            <label class="btn primary" for="fileInput">Choose file…</label>
            <input id="fileInput" type="file" class="hidden" />
          </div>
        </div>

        <div id="progress" class="progress hidden">
          <div id="progressText" class="small muted">Preparing…</div>
          <div class="bar"><div id="progressBar"></div></div>
        </div>
      </div>

      <div id="app" class="card main hidden" aria-live="polite">
        <div class="pane">
          <div class="toolbar">
            <div class="left">
              <div class="input" title="Search the index (limited results)">
                <label for="q">Find</label>
                <input
                  id="q"
                  type="text"
                  placeholder="substring match (e.g. etc/ssh, passwd, .service)"
                  autocomplete="off"
                />
              </div>
              <button id="btnFind" class="primary">Find</button>
              <button id="btnStopFind">Stop</button>
            </div>
            <div class="right">
              <span id="chipStats" class="chip">No data</span>
            </div>
          </div>

          <div id="tree" class="tree" role="tree"></div>

          <div id="results" class="results hidden">
            <h3>
              Results (limited). Click to reveal in tree.
              <span id="resultsMeta" class="faint"></span>
            </h3>
            <div id="resultsList"></div>
          </div>
        </div>

        <div class="pane">
          <div class="toolbar">
            <div class="left">
              <span class="chip">Selection</span>
            </div>
            <div class="right">
              <button id="btnCollapseAll" title="Collapse all folders">
                Collapse all
              </button>
            </div>
          </div>

          <div class="details">
            <div id="selection" class="kv">
              <div class="k">Status</div>
              <div class="v">No item selected.</div>

              <div class="k">Hint</div>
              <div class="v">
                Use <span class="kbd">Find</span>, then click a result to reveal
                it.
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="footer-note">
        Nothing is uploaded; parsing happens in your browser.
      </div>
    </div>
    <script type="module" src="./js/app.js"></script>
  </body>
</html>